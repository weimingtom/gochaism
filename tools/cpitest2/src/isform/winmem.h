/*--------------------------------------------------------------------------
  メモリブロック系関数 for Windows
--------------------------------------------------------------------------*/

#if 0 // disable

#ifndef _WINMEM_H_
#define _WINMEM_H_

#include <windows.h>

/*--------------------------------------------------------------------------
  マクロ宣言
--------------------------------------------------------------------------*/
#ifndef size_t
typedef unsigned int size_t;
#endif // !defined(size_t)

/*--------------------------------------------------------------------------
  グローバル変数
--------------------------------------------------------------------------*/
HANDLE hHeap;

/*--------------------------------------------------------------------------
  メモリブロックの開放
--------------------------------------------------------------------------*/
void free(void *memblock)
{
	HeapFree(hHeap, 0, memblock);
}

/*--------------------------------------------------------------------------
  メモリブロックの割り当て
--------------------------------------------------------------------------*/
void *malloc(size_t size)
{
	if(!hHeap) hHeap = GetProcessHeap();
	return HeapAlloc(hHeap, 0, size);
}

/*--------------------------------------------------------------------------
  メモリブロックの再割り当て
--------------------------------------------------------------------------*/
void *realloc(void *memblock, size_t size)
{
	return HeapReAlloc(hHeap, 0, memblock, size);
}

#endif // !_WINMEM_H_

#endif // disable
